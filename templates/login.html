{% extends "layout.html" %}

{% block content %}
<!--   <div class="jumbo">
  <div class="sign">
  <h1>Upload Receipt</h1>
   <form action = "http://localhost:5000/uploader" method = "POST" 
         enctype = "multipart/form-data">
         <input type = "file" name = "file" class="btn btn-info"/>
         <input type = "submit" class="btn btn-info"/>
      </form>
  </div>
  </div> -->



<div class="container">
  <div class="jumbotron p-3 p-md-5 text-white rounded bg-dark">
    <div class="col-md-6 px-0">
      <h1 class="display-4 font-italic">Upload your receipt</h1>

      <form action="" class="mt-4" method="post" enctype="multipart/form-data">
        <div class="form-group">
          <label for="exampleFormControlFile1" class='sr-only'>Receipt image</label>
          <input type="file" class="form-control-file" name="file" id="exampleFormControlFile1" required>
        </div>
        <div class="form-inline">
          <input type="submit" class="btn btn-primary" value="Upload">
          <input type="button" value="Refresh Page" class="btn btn-danger ml-3" onClick="location.href=location.href">
        </div>
      </form>
    </div>
  </div>


  <div class="row mb-2">

      {% if stuff %}
      <div class="col-lg-6 offset-lg-3">
        <div class="card flex-md-row mb-4 shadow-sm h-md-250">
          <div class="card-body d-flex justify-content-between">
            <div>
              <strong class="d-inline-block mb-2 text-primary">Total: {{ stuff.total }} <span class="badge badge-info">cals</span>, {{ stuff.steps }} <span class="badge badge-info">steps</span></strong>
              <!-- <h3 class="mb-0">
                <a class="text-dark" href="#">Uploaded API result</a>
              </h3> -->
              <!-- <div class="mb-1 text-muted">Now 2019</div> -->
              <div class="card-text mb-auto">
                <ul class="list-group">
                  {% for item in stuff['items'] %}
                    <li class="list-group-item">{{ item[0] }}: {{ item[1] }} cals</li>
                  {% endfor %}
                </ul>
                <!-- <code>{{ upload_result }}</code> -->
              </div>
              <a class="mt-3 btn btn-sm btn-outline-secondary" href="{{ image_url }}">View receipt</a>
            </div>
            <a href="{{ image_url }}" class="d-flex flex-column justify-content-center">
              <img class="card-img-right flex-auto d-none d-md-block" src="{{ thumbnail_url1 }}" width=200 height=400 alt="Card image cap">
            </a>
          </div>
        </div>
      </div>
      {% endif %}


<script>
  document.getElementById("template-src-img").setAttribute("src", `data:image/svg+xml;charset=UTF-8,<svg%20width%3D"200"%20height%3D"250"%20xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"%20viewBox%3D"0%200%20200%20250"%20preserveAspectRatio%3D"none"><defs><style%20type%3D"text%2Fcss">%23holder_16868c245b4%20text%20%7B%20fill%3A%23eceeef%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A13pt%20%7D%20<%2Fstyle><%2Fdefs><g%20id%3D"holder_16868c245b4"><rect%20width%3D"200"%20height%3D"250"%20fill%3D"%2355595c"><%2Frect><g><text%20x%3D"56.203125"%20y%3D"130.7">Thumbnail<%2Ftext><%2Fg><%2Fg><%2Fsvg>`)
</script>

{% endblock %}